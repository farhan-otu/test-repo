import{jsxs as l,Fragment as u,jsx as a}from"react/jsx-runtime";import{du as $,dN as q,dO as Q,u as W,a as v,e as Z,d as b,b as _,V as J,j as X,B as z,q as Y,al as ee,P as ae,G as K,H as S,I as x,cv as te,Z as ie,a0 as A,dP as re,w as ne,T as y,cW as se,bm as de,ah as oe,bn as le,f as ce,cP as me,h as pe,L,dK as he,cK as ge,dh as ue,dQ as B,dR as ye,D as fe}from"./main-hjbDDO6j.js";import{useState as m,Fragment as ve}from"react";import{u as be}from"./ConfirmDialog-DN_NVsrg.js";import{G as Ie,C as Pe}from"./ClickableCard-CQsF-S-i.js";import{V as Ce}from"./ViewHeader-Dr6ZoEJz.js";import{M as Oe}from"./ManageOrderDialog-Dm20IJc0.js";import{b as ke,s as f}from"./sortBy-D1UyZ0jY.js";import"react-dom";import"./Droppable-BpTayVV3.js";import"./DataListItemRow-C-0mzg8R.js";import"./_baseFlatten-DK0O-V_R.js";function De(e,t,r,s){for(var d=-1,o=e==null?0:e.length;++d<o;){var c=e[d];t(s,c,r(c),e)}return s}function we(e,t,r,s){return ke(e,function(d,o,c){t(s,d,r(d),c)}),s}function ze(e,t){return function(r,s){var d=q(r)?De:we,o={};return d(r,e,$(s),o)}}var Ke=Object.prototype,Se=Ke.hasOwnProperty,xe=ze(function(e,t,r){Se.call(e,r)?e[r].push(t):Q(e,r,[t])});const Ae=e=>{const{t}=v(),{realm:r}=b();return l(L,{to:he({realm:r,providerId:e.providerId,alias:e.alias,tab:"settings"}),children:[e.displayName||e.alias,!e.enabled&&a(ge,{isRead:!0,className:"pf-v5-u-ml-sm",children:t("disabled")},`${e.providerId}-disabled`)]},e.providerId)},Be=e=>{const{t}=v(),{realm:r}=b();return e?.organizationId?a(L,{to:ue({realm:r,id:e.organizationId,tab:"identityProviders"}),children:t("organization")},e.providerId):"â€”"};function $e(){const{adminClient:e}=W(),{t}=v(),r=xe(Z().identityProviders,"groupName"),{realm:s}=b(),d=_(),[o,c]=m(0),p=()=>c(o+1),[g,I]=m(!1),[P,C]=m(!1),[V,O]=m(!1),[h,T]=m(!1),[k,F]=m(),{addAlert:N,addError:R}=J();X(async()=>e.identityProviders.find({max:1}),i=>{T(i.length===1)},[o]);const j=async(i,n,D)=>{const w={first:i,max:n,realmOnly:g};D&&(w.search=D);const U=await e.identityProviders.find(w);return f(U,"alias")},G=i=>d(B({realm:s,providerId:i})),E=()=>Object.keys(r).map(i=>a(ye,{label:i,children:f(r[i],"name").map(n=>a(fe,{value:n.id,component:"a","data-testid":n.id,onClick:()=>d(B({realm:s,providerId:n.id})),children:n.name},n.id))},i)),[H,M]=be({titleKey:"deleteProvider",messageKey:t("deleteConfirm",{provider:k?.alias}),continueButtonLabel:"delete",continueButtonVariant:z.danger,onConfirm:async()=>{try{await e.identityProviders.del({alias:k.alias}),p(),N(t("deletedSuccessIdentityProvider"),Y.success)}catch(i){R("deleteErrorIdentityProvider",i)}}});return l(u,{children:[a(M,{}),V&&a(Oe,{hideRealmBasedIdps:g,onClose:()=>{O(!1),p()}}),a(Ce,{titleKey:"identityProviders",subKey:"listExplain",helpUrl:ee.identityProvidersUrl}),l(ae,{variant:h?"light":"default",className:h?"pf-v5-u-p-0":"",children:[!h&&l(u,{children:[a(K,{children:a(S,{component:x.p,children:t("getStarted")})}),Object.keys(r).map(i=>l(ve,{children:[a(K,{children:l(S,{className:"pf-v5-u-mt-lg",component:x.h2,children:[i,":"]})}),a("hr",{className:"pf-v5-u-mb-lg"}),a(Ie,{hasGutter:!0,children:f(r[i],"name").map(n=>a(Pe,{"data-testid":`${n.id}-card`,onClick:()=>G(n.id),children:a(te,{children:l(ie,{hasGutter:!0,children:[a(A,{children:a(re,{icon:n.id})}),a(A,{isFilled:!0,children:n.name})]})})},n.id))})]},i))]}),h&&a(ne,{loader:j,isPaginated:!0,ariaLabelKey:"identityProviders",searchPlaceholderKey:"searchForProvider",toolbarItem:l(u,{children:[a(y,{alignSelf:"center",children:a(se,{label:t("hideOrganizationLinkedIdps"),id:"hideOrganizationLinkedIdps","data-testid":"hideOrganizationLinkedIdps",isChecked:g,onChange:(i,n)=>{I(n),p()}})}),a(y,{children:a(de,{"data-testid":"addProviderDropdown",onOpenChange:i=>C(i),toggle:i=>a(oe,{ref:i,onClick:()=>C(!P),variant:"primary",children:t("addProvider")}),isOpen:P,children:a(le,{children:E()})})}),a(y,{children:a(ce,{"data-testid":"manageDisplayOrder",variant:"link",onClick:()=>O(!0),children:t("manageDisplayOrder")})})]}),actions:[{title:t("delete"),onRowClick:i=>{F(i),H()}}],columns:[{name:"alias",displayKey:"name",cellRenderer:Ae},{name:"providerId",displayKey:"providerDetails",cellFormatters:[me()]},{name:"organizationId",displayKey:"linkedOrganization",cellRenderer:Be}],emptyState:a(pe,{message:t("identityProviders"),instructions:t("emptyRealmBasedIdps"),isSearchVariant:!0,secondaryActions:[{text:t("clearAllFilters"),onClick:()=>{I(!1),p()},type:z.link}]})},o)]})]})}export{$e as default};
//# sourceMappingURL=IdentityProvidersSection-Ex1kVexy.js.map
