import{jsxs as h,Fragment as y,jsx as e}from"react/jsx-runtime";import{u as M,a as x,c as P,b as S,V as O,d as K,Y as w,B as W,q as Y,f6 as $,O as p,D as z,ay as U,G as B,H as q,z as V,K as j,N as I,_ as T,c7 as _,c8 as k,aj as t,$ as R,a3 as X}from"./main-hjbDDO6j.js";import{u as F}from"./ConfirmDialog-DN_NVsrg.js";import{V as H}from"./ViewHeader-Dr6ZoEJz.js";import{F as G}from"./FormAccess-DEsYjDHG.js";import{i as D}from"./isEqual-DwRuOUtl.js";const te=({provider:l,save:a,noDivider:i=!1,dropdownItems:r=[]})=>{const{adminClient:s}=M(),{t:u}=x(),{id:f}=P(),C=S(),{addAlert:d,addError:E}=O(),{realm:g}=K(),{control:b,setValue:m}=w(),[n,o]=F({titleKey:"userFedDisableConfirmTitle",messageKey:"userFedDisableConfirm",continueButtonLabel:"disable",onConfirm:()=>{m("config.enabled[0]","false"),a()}}),[L,v]=F({titleKey:"userFedDeleteConfirmTitle",messageKey:"userFedDeleteConfirm",continueButtonLabel:"delete",continueButtonVariant:W.danger,onConfirm:async()=>{try{await s.components.del({id:f}),d(u("userFedDeletedSuccess"),Y.success),C($({realm:g}),{replace:!0})}catch(c){E("userFedDeleteError",c)}}});return h(y,{children:[e(o,{}),e(v,{}),e(p,{name:"config.enabled",defaultValue:["true"],control:b,render:({field:c})=>f?e(H,{divider:!i,titleKey:l,dropdownItems:[...r,e(z,{onClick:()=>L(),"data-testid":"delete-cmd",children:u("deleteProvider")},"delete")],isEnabled:c.value?.[0]==="true"||c.value==="true",onToggle:A=>{A?(c.onChange([A.toString()]),a()):n()}}):e(H,{titleKey:u("addProvider",{provider:l,count:1})})})]})},J=({title:l,description:a,showDescription:i=!1})=>h(y,{children:[e(U,{size:"xl",headingLevel:"h2",className:i?"kc-wizard-section-header__title--has-description":"kc-wizard-section-header__title",children:l}),i&&e(B,{className:"kc-wizard-section-header__description",children:e(q,{children:a})})]}),N=({form:l})=>{const{t:a}=x(),[i,r]=V(),[s,u]=V(),[f,C]=V(),d=j({control:l.control,name:"config.cachePolicy"}),E=[e(t,{value:["0"],children:["00"]},0)];let g="";for(let n=1;n<24;n++)n<10?g=`0${n}`:g=`${n}`,E.push(e(t,{value:[`${n}`],children:g},n));const b=[e(t,{value:["0"],children:["00"]},0)];let m="";for(let n=1;n<60;n++)n<10?m=`0${n}`:m=`${n}`,b.push(e(t,{value:[`${n}`],children:m},n));return h(y,{children:[e(I,{label:a("cachePolicy"),labelIcon:e(T,{helpText:a("cachePolicyHelp"),fieldLabelId:"cachePolicy"}),fieldId:"kc-cache-policy",children:e(p,{name:"config.cachePolicy",defaultValue:["DEFAULT"],control:l.control,render:({field:n})=>h(_,{toggleId:"kc-cache-policy",onToggle:r,isOpen:i,onSelect:o=>{n.onChange(o),r()},selections:n.value,variant:k.single,"data-testid":"kerberos-cache-policy","aria-label":a("selectCachePolicy"),children:[e(t,{value:["DEFAULT"],children:"DEFAULT"},0),e(t,{value:["EVICT_DAILY"],children:"EVICT_DAILY"},1),e(t,{value:["EVICT_WEEKLY"],children:"EVICT_WEEKLY"},2),e(t,{value:["MAX_LIFESPAN"],children:"MAX_LIFESPAN"},3),e(t,{value:["NO_CACHE"],children:"NO_CACHE"},4)]})})}),D(d,["EVICT_WEEKLY"])?e(R,{id:"kc-eviction-day",name:"config.evictionDay[0]",label:a("evictionDay"),labelIcon:a("evictionDayHelp"),controller:{defaultValue:"1"},"aria-label":a("selectEvictionDay"),options:[{key:"1",value:a("Sunday")},{key:"2",value:a("Monday")},{key:"3",value:a("Tuesday")},{key:"4",value:a("Wednesday")},{key:"5",value:a("Thursday")},{key:"6",value:a("Friday")},{key:"7",value:a("Saturday")}]}):null,D(d,["EVICT_DAILY"])||D(d,["EVICT_WEEKLY"])?h(y,{children:[e(I,{label:a("evictionHour"),labelIcon:e(T,{helpText:a("evictionHourHelp"),fieldLabelId:"evictionHour"}),isRequired:!0,fieldId:"kc-eviction-hour",children:e(p,{name:"config.evictionHour",defaultValue:["0"],control:l.control,render:({field:n})=>e(_,{toggleId:"kc-eviction-hour",onToggle:u,isOpen:s,onSelect:o=>{n.onChange(o),u()},selections:n.value,variant:k.single,"aria-label":a("selectEvictionHour"),children:E})})}),e(I,{label:a("evictionMinute"),labelIcon:e(T,{helpText:a("evictionMinuteHelp"),fieldLabelId:"evictionMinute"}),isRequired:!0,fieldId:"kc-eviction-minute",children:e(p,{name:"config.evictionMinute",defaultValue:["0"],control:l.control,render:({field:n})=>e(_,{toggleId:"kc-eviction-minute",onToggle:C,isOpen:f,onSelect:o=>{n.onChange(o),C()},selections:n.value,variant:k.single,"aria-label":a("selectEvictionMinute"),children:b})})})]}):null,D(d,["MAX_LIFESPAN"])?e(I,{label:a("maxLifespan"),labelIcon:e(T,{helpText:a("maxLifespanHelp"),fieldLabelId:"maxLifespan"}),fieldId:"kc-max-lifespan",children:e(p,{name:"config.maxLifespan[0]",defaultValue:0,control:l.control,render:({field:n})=>{const L=v=>n.onChange(Math.max(v,0));return e(X,{id:"kc-max-lifespan","data-testid":"kerberos-cache-lifespan",value:n.value,min:0,unit:a("ms"),type:"text",onPlus:()=>n.onChange(Number(n.value)+1),onMinus:()=>n.onChange(Number(n.value)-1),onChange:v=>{const c=Number(v.currentTarget.value);L(isNaN(c)?0:c)}})}})}):null]})},ie=({form:l,showSectionHeading:a=!1,showSectionDescription:i=!1,unWrap:r=!1})=>{const{t:s}=x();return h(y,{children:[a&&e(J,{title:s("cacheSettings"),description:s("cacheSettingsDescription"),showDescription:i}),r?e(N,{form:l}):e(G,{role:"manage-realm",isHorizontal:!0,children:e(N,{form:l})})]})};export{te as H,ie as S,J as W};
//# sourceMappingURL=SettingsCache-B8YydRw1.js.map
