import{bH as A,bG as V,ar as q,cY as v,as as r,at as H}from"./main-hjbDDO6j.js";import*as i from"react";const n={dirRtl:"pf-v5-m-dir-rtl",expandableSection:"pf-v5-c-expandable-section",expandableSectionContent:"pf-v5-c-expandable-section__content",expandableSectionToggle:"pf-v5-c-expandable-section__toggle",expandableSectionToggleIcon:"pf-v5-c-expandable-section__toggle-icon",expandableSectionToggleText:"pf-v5-c-expandable-section__toggle-text",modifiers:{expanded:"pf-m-expanded",detached:"pf-m-detached",truncate:"pf-m-truncate",limitWidth:"pf-m-limit-width",displayLg:"pf-m-display-lg",indented:"pf-m-indented",active:"pf-m-active",expandTop:"pf-m-expand-top"}},C={name:"--pf-v5-c-expandable-section--m-truncate__content--LineClamp",value:"3",var:"var(--pf-v5-c-expandable-section--m-truncate__content--LineClamp)"};var a;(function(s){s.default="default",s.truncate="truncate"})(a||(a={}));const T=(s,e)=>{!e||s<1||e.style.setProperty(C.name,s.toString())};class S extends i.Component{constructor(e){super(e),this.expandableContentRef=i.createRef(),this.observer=()=>{},this.checkToggleVisibility=()=>{var t;if(!((t=this.expandableContentRef)===null||t===void 0)&&t.current){const o=this.props.truncateMaxLines||parseInt(C.value),d=this.expandableContentRef.current.scrollHeight/parseInt(getComputedStyle(this.expandableContentRef.current).lineHeight);this.setState({hasToggle:d>o})}},this.resize=()=>{if(!this.expandableContentRef.current)return;const{offsetWidth:t}=this.expandableContentRef.current;this.state.previousWidth!==t&&(this.setState({previousWidth:t}),this.checkToggleVisibility())},this.handleResize=A(this.resize,250),this.state={isExpanded:e.isExpanded||!1,hasToggle:!0,previousWidth:void 0}}calculateToggleText(e,t,o,d){return d&&t!==""?t:!d&&o!==""?o:e}componentDidMount(){if(this.props.variant===a.truncate){const e=this.expandableContentRef.current;if(!e)return;this.setState({previousWidth:e.offsetWidth}),this.observer=V(e,this.handleResize,!1),this.props.truncateMaxLines&&T(this.props.truncateMaxLines,e),this.checkToggleVisibility()}}componentDidUpdate(e){if(this.props.variant===a.truncate&&this.props.truncateMaxLines&&this.expandableContentRef.current&&(e.truncateMaxLines!==this.props.truncateMaxLines||e.children!==this.props.children)){const t=this.expandableContentRef.current;T(this.props.truncateMaxLines,t),this.checkToggleVisibility()}}componentWillUnmount(){this.props.variant===a.truncate&&this.observer()}render(){const e=this.props,{onToggle:t,isActive:o,className:d,toggleText:_,toggleTextExpanded:E,toggleTextCollapsed:L,toggleContent:y,children:I,isExpanded:u,isDetached:g,displaySize:R,isWidthLimited:W,isIndented:M,contentId:N,toggleId:x,variant:c,truncateMaxLines:U}=e,z=q(e,["onToggle","isActive","className","toggleText","toggleTextExpanded","toggleTextCollapsed","toggleContent","children","isExpanded","isDetached","displaySize","isWidthLimited","isIndented","contentId","toggleId","variant","truncateMaxLines"]);g&&!x&&console.warn("ExpandableSection: The toggleId value must be passed in and must match the toggleId of the ExpandableSectionToggle.");let p=t,l=u;const f=N||v("expandable-section-content"),m=x||v("expandable-section-toggle");u===void 0&&(l=this.state.isExpanded,p=(h,D)=>{this.setState({isExpanded:D},()=>t?.(h,this.state.isExpanded))});const k=this.calculateToggleText(_,E,L,l),b=!g&&i.createElement("button",{className:r(n.expandableSectionToggle),type:"button","aria-expanded":l,"aria-controls":f,id:m,onClick:h=>p?.(h,!l)},c!==a.truncate&&i.createElement("span",{className:r(n.expandableSectionToggleIcon)},i.createElement(H,{"aria-hidden":!0})),i.createElement("span",{className:r(n.expandableSectionToggleText)},y||k));return i.createElement("div",Object.assign({className:r(n.expandableSection,l&&n.modifiers.expanded,o&&n.modifiers.active,g&&n.modifiers.detached,R==="lg"&&n.modifiers.displayLg,W&&n.modifiers.limitWidth,M&&n.modifiers.indented,c===a.truncate&&n.modifiers.truncate,d)},z),c===a.default&&b,i.createElement("div",{ref:this.expandableContentRef,className:r(n.expandableSectionContent),hidden:c!==a.truncate&&!l,id:f,"aria-labelledby":m,role:"region"},I),c===a.truncate&&this.state.hasToggle&&b)}}S.displayName="ExpandableSection";S.defaultProps={className:"",toggleText:"",toggleTextExpanded:"",toggleTextCollapsed:"",onToggle:(s,e)=>{},isActive:!1,isDetached:!1,displaySize:"default",isWidthLimited:!1,isIndented:!1,variant:"default"};export{S as E};
//# sourceMappingURL=ExpandableSection-CqcMlejr.js.map
