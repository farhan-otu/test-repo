import{jsxs as c,Fragment as F,jsx as a}from"react/jsx-runtime";import{a as y,b as V,P as C,eQ as E,u as K,V as S,e as T,eR as d,l as q,j,n as w,J as u,A as H,f as v,q as f}from"./main-hjbDDO6j.js";import{D as O}from"./DynamicComponents-2Oogxguf.js";import{F as k}from"./FormAccess-DEsYjDHG.js";import{V as x}from"./ViewHeader-Dr6ZoEJz.js";import{u as P}from"./useParams-XtwJXIDJ.js";import"react";import"react-dom";import"./ClientSelect-Di5Ep3wz.js";import"./FileUpload-DFzHUp8z.js";import"./CodeEditor-BF8OqNGf.js";import"./copy-icon-ePLWnxgr.js";import"./GroupPickerDialog-CJH5Fdnt.js";import"./DataListItemRow-C-0mzg8R.js";import"./KeySelect-CBdQO7FV.js";import"./MultiLineInput-BKovUfcB.js";import"./AddRoleMappingModal-B-7S42YC.js";import"./translationFormatter-aKDacg4X.js";import"./useLocaleSort-Bon3wgU4.js";import"./ConfirmDialog-DN_NVsrg.js";import"./filter-icon-I49U7vdU.js";const D=({providerType:i,onClose:o})=>{const{adminClient:t}=K(),{t:r}=y(),{id:s}=P(),{addAlert:p,addError:b}=S(),g=T().componentTypes?.[d]??[],l=q({mode:"onChange"}),{handleSubmit:h,reset:I}=l,A=async e=>{e.config&&Object.entries(e.config).forEach(([n,m])=>e.config[n]=Array.isArray(m)?m:[m]);try{s?(await t.components.update({id:s},{...e,providerType:d}),p(r("saveProviderSuccess"),f.success)):(await t.components.create({...e,providerId:i,providerType:d}),p(r("saveProviderSuccess"),f.success),o?.())}catch(n){b("saveProviderError",n)}};return j(async()=>{if(s)return await t.components.findOne({id:s})},e=>{e&&I({...e})},[]),a(k,{isHorizontal:!0,role:"manage-realm",onSubmit:h(A),children:c(w,{...l,children:[s&&a(u,{name:"id",label:r("providerId"),labelIcon:r("providerIdHelp"),rules:{required:r("required")},readOnly:!0}),a(u,{name:"name",defaultValue:i,label:r("name"),labelIcon:r("keyProviderMapperNameHelp"),rules:{required:r("required")}}),a(O,{properties:g.find(e=>e.id===i)?.properties||[]}),c(H,{children:[a(v,{"data-testid":"add-provider-button",variant:"primary",type:"submit",children:r("save")}),a(v,{onClick:()=>o?.(),variant:"link",children:r("cancel")})]})]})})};function sr(){const{t:i}=y(),o=P(),t=V();return c(F,{children:[a(x,{titleKey:i("editProvider"),subKey:o.providerType}),a(C,{variant:"light",children:a(D,{...o,onClose:()=>t(E({realm:o.realm,tab:"providers"}))})})]})}export{D as KeyProviderForm,sr as default};
//# sourceMappingURL=KeyProviderForm-C2YksKGm.js.map
