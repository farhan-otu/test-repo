import{jsx as t,jsxs as w,Fragment as C}from"react/jsx-runtime";import{u as V,a as y,V as A,b,d as E,l as F,j as P,y as j,P as x,q as G,cA as N,fv as R,fw as M}from"./main-hjbDDO6j.js";import{useState as l}from"react";import{V as S}from"./ViewHeader-Dr6ZoEJz.js";import{U as k,t as q}from"./UserForm-uc4P8TwT.js";/* empty css                     */import"react-dom";import"./SwitchControl-C_wbgFy3.js";import"./FormAccess-DEsYjDHG.js";import"./copy-icon-ePLWnxgr.js";import"./GroupPickerDialog-CJH5Fdnt.js";import"./DataListItemRow-C-0mzg8R.js";import"./useFormatDate-DtCZfuLt.js";import"./CopyToClipboardButton-MzIOrqEi.js";function Y(){const{adminClient:n}=V(),{t:r}=y(),{addAlert:c,addError:u}=A(),p=b(),{realm:m,realmRepresentation:s}=E(),o=F({mode:"onChange"}),[f,g]=l([]),[d,U]=l();P(()=>n.users.getProfileMetadata({realm:m}),a=>{if(!a)throw new Error(r("notFound"));o.setValue("attributes.locale",s?.defaultLocale||""),U(a)},[]);const h=async a=>{try{const e=await n.users.create({...q(a),groups:f.map(i=>i.path),enabled:!0});c(r("userCreated"),G.success),p(N({id:e.id,realm:m,tab:"settings"}))}catch(e){R(e)?M(e,o.setError,(i,v)=>r(i,v)):u("userCreateError",e)}};return!s||!d?t(j,{}):w(C,{children:[t(S,{titleKey:r("createUser"),className:"kc-username-view-header"}),t(x,{variant:"light",children:t(k,{form:o,realm:s,userProfileMetadata:d,onGroupsUpdate:g,save:h})})]})}export{Y as default};
//# sourceMappingURL=CreateUser-C3MKYB59.js.map
