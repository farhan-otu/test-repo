import{jsxs as u,Fragment as L,jsx as n}from"react/jsx-runtime";import{useState as T}from"react";import{a as U,M as D,m as k,f as g,N as I,eG as R,d2 as _,d3 as b}from"./main-hjbDDO6j.js";import{F as C}from"./FileUpload-DFzHUp8z.js";import{C as y}from"./CodeEditor-BF8OqNGf.js";const P=({id:d,onChange:s,helpText:F="helpFileUpload",unWrap:c=!1,language:x,extension:v,...r})=>{const{t}=U(),m={value:"",filename:"",isLoading:!1,modal:!1},[e,a]=T(m),p=()=>a({...e,modal:!1}),h=(i,l)=>{a({...e,filename:l.name})},o=i=>{a({...e,value:i}),s(i)},f=()=>{a({...e,modal:!0})};return u(L,{children:[e.modal&&n(D,{variant:k.small,title:t("clearFile"),isOpen:!0,onClose:p,actions:[n(g,{variant:"primary","data-testid":"clear-button",onClick:()=>{a(m),s("")},children:t("clear")},"confirm"),n(g,{"data-testid":"cancel",variant:"link",onClick:p,children:t("cancel")},"cancel")],children:t("clearFileExplain")}),c&&n(C,{id:d,...r,type:"text",value:e.value,filename:e.filename,onFileInputChange:h,onDataChange:(i,l)=>o(l),onTextChange:(i,l)=>o(l),onClearClick:f,onReadStarted:()=>a({...e,isLoading:!0}),onReadFinished:()=>a({...e,isLoading:!1}),isLoading:e.isLoading,dropzoneProps:{accept:{"application/text":[v]}}}),!c&&u(I,{label:t("resourceFile"),fieldId:d,children:[n(C,{"data-testid":d,id:d,...r,type:"text",value:e.value,filename:e.filename,onFileInputChange:h,onDataChange:(i,l)=>o(l),onTextChange:(i,l)=>o(l),onClearClick:f,onReadStarted:()=>a({...e,isLoading:!0}),onReadFinished:()=>a({...e,isLoading:!1}),isLoading:e.isLoading,hideDefaultPreview:!0,children:!r.hideDefaultPreview&&n(y,{isLineNumbersVisible:!0,code:e.value,language:x,height:"128px",onChange:o,isReadOnly:!r.allowEditingUploadedText})}),n(R,{children:n(_,{children:n(b,{children:t(F)})})})]})]})};export{P as F};
//# sourceMappingURL=FileUploadForm-CQxs07NG.js.map
