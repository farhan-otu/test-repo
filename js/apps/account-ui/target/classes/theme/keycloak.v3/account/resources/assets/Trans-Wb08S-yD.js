import{cloneElement as W,createElement as N,isValidElement as I,Fragment as Q,Children as X,useContext as Y}from"react";import{aN as Z,aO as q,aP as G,aQ as F,aR as H,aS as D,aT as K,aU as U}from"./main-B1vcX1Xc.js";var _={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const R=Z(_);var ee=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function P(e){var n={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(n.name=t[1],(R[t[1]]||e.charAt(e.length-2)==="/")&&(n.voidElement=!0),n.name.startsWith("!--"))){var o=e.indexOf("-->");return{type:"comment",comment:o!==-1?e.slice(4,o):""}}for(var h=new RegExp(ee),s=null;(s=h.exec(e))!==null;)if(s[0].trim())if(s[1]){var l=s[1].trim(),f=[l,""];l.indexOf("=")>-1&&(f=l.split("=")),n.attrs[f[0]]=f[1],h.lastIndex--}else s[2]&&(n.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return n}var te=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ne=/^\s*$/,se=Object.create(null);function z(e,n){switch(n.type){case"text":return e+n.content;case"tag":return e+="<"+n.name+(n.attrs?function(t){var o=[];for(var h in t)o.push(h+'="'+t[h]+'"');return o.length?" "+o.join(" "):""}(n.attrs):"")+(n.voidElement?"/>":">"),n.voidElement?e:e+n.children.reduce(z,"")+"</"+n.name+">";case"comment":return e+"<!--"+n.comment+"-->"}}var re={parse:function(e,n){n||(n={}),n.components||(n.components=se);var t,o=[],h=[],s=-1,l=!1;if(e.indexOf("<")!==0){var f=e.indexOf("<");o.push({type:"text",content:f===-1?e:e.substring(0,f)})}return e.replace(te,function(a,v){if(l){if(a!=="</"+t.name+">")return;l=!1}var d,g=a.charAt(1)!=="/",A=a.startsWith("<!--"),b=v+a.length,c=e.charAt(b);if(A){var O=P(a);return s<0?(o.push(O),o):((d=h[s]).children.push(O),o)}if(g&&(s++,(t=P(a)).type==="tag"&&n.components[t.name]&&(t.type="component",l=!0),t.voidElement||l||!c||c==="<"||t.children.push({type:"text",content:e.slice(b,e.indexOf("<",b))}),s===0&&o.push(t),(d=h[s-1])&&d.children.push(t),h[s]=t),(!g||t.voidElement)&&(s>-1&&(t.voidElement||t.name===a.slice(2,-1))&&(s--,t=s===-1?o:h[s]),!l&&c!=="<"&&c)){d=s===-1?o:h[s].children;var i=e.indexOf("<",b),p=e.slice(b,i===-1?void 0:i);ne.test(p)&&(p=" "),(i>-1&&s+d.length>=0||p!==" ")&&d.push({type:"text",content:p})}}),o},stringify:function(e){return e.reduce(function(n,t){return n+z("",t)},"")}};const B=(e,n)=>{if(!e)return!1;const t=e.props?.children??e.children;return n?t.length>0:!!t},L=e=>{if(!e)return[];const n=e.props?.children??e.children;return e.props?.i18nIsDynamicList?S(n):n},ae=e=>Array.isArray(e)&&e.every(I),S=e=>Array.isArray(e)?e:[e],ie=(e,n)=>{const t={...n};return t.props=Object.assign(e.props,n.props),t},M=(e,n)=>{if(!e)return"";let t="";const o=S(e),h=n?.transSupportBasicHtmlNodes?n.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((s,l)=>{if(F(s))t+=`${s}`;else if(I(s)){const{props:f,type:a}=s,v=Object.keys(f).length,d=h.indexOf(a)>-1,g=f.children;if(!g&&d&&!v)t+=`<${a}/>`;else if(!g&&(!d||v)||f.i18nIsDynamicList)t+=`<${l}></${l}>`;else if(d&&v===1&&F(g))t+=`<${a}>${g}</${a}>`;else{const A=M(g,n);t+=`<${l}>${A}</${l}>`}}else if(s===null)H("Trans: the passed in value is invalid - seems you passed in a null child.");else if(D(s)){const{format:f,...a}=s,v=Object.keys(a);if(v.length===1){const d=f?`${v[0]}, ${f}`:v[0];t+=`{{${d}}}`}else H("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else H("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),t},oe=(e,n,t,o,h,s)=>{if(n==="")return[];const l=o.transKeepBasicHtmlNodesFor||[],f=n&&new RegExp(l.map(i=>`<${i}`).join("|")).test(n);if(!e&&!f&&!s)return[n];const a={},v=i=>{S(i).forEach(u=>{F(u)||(B(u)?v(L(u)):D(u)&&!I(u)&&Object.assign(a,u))})};v(e);const d=re.parse(`<0>${n}</0>`),g={...a,...h},A=(i,p,u)=>{const x=L(i),T=c(x,p.children,u);return ae(x)&&T.length===0||i.props?.i18nIsDynamicList?x:T},b=(i,p,u,x,T)=>{i.dummy?(i.children=p,u.push(W(i,{key:x},T?void 0:p))):u.push(...X.map([i],m=>{const r={...m.props};return delete r.i18nIsDynamicList,N(m.type,{...r,key:x,ref:m.ref},T?null:p)}))},c=(i,p,u)=>{const x=S(i);return S(p).reduce((m,r,C)=>{const j=r.children?.[0]?.content&&t.services.interpolator.interpolate(r.children[0].content,g,t.language);if(r.type==="tag"){let k=x[parseInt(r.name,10)];u.length===1&&!k&&(k=u[0][r.name]),k||(k={});const y=Object.keys(r.attrs).length!==0?ie({props:r.attrs},k):k,$=I(y),w=$&&B(r,!0)&&!r.voidElement,V=f&&D(y)&&y.dummy&&!$,J=D(e)&&Object.hasOwnProperty.call(e,r.name);if(F(y)){const E=t.services.interpolator.interpolate(y,g,t.language);m.push(E)}else if(B(y)||w){const E=A(y,r,u);b(y,E,m,C)}else if(V){const E=c(x,r.children,u);b(y,E,m,C)}else if(Number.isNaN(parseFloat(r.name)))if(J){const E=A(y,r,u);b(y,E,m,C,r.voidElement)}else if(o.transSupportBasicHtmlNodes&&l.indexOf(r.name)>-1)if(r.voidElement)m.push(N(r.name,{key:`${r.name}-${C}`}));else{const E=c(x,r.children,u);m.push(N(r.name,{key:`${r.name}-${C}`},E))}else if(r.voidElement)m.push(`<${r.name} />`);else{const E=c(x,r.children,u);m.push(`<${r.name}>${E}</${r.name}>`)}else if(D(y)&&!$){const E=r.children[0]?j:null;E&&m.push(E)}else b(y,j,m,C,r.children.length!==1||!j)}else if(r.type==="text"){const k=o.transWrapTextNodes,y=s?o.unescape(t.services.interpolator.interpolate(r.content,g,t.language)):t.services.interpolator.interpolate(r.content,g,t.language);k?m.push(N(k,{key:`${r.name}-${C}`},y)):m.push(y)}return m},[])},O=c([{dummy:!0,children:e||[]}],d,S(e||[]));return L(O[0])};function le({children:e,count:n,parent:t,i18nKey:o,context:h,tOptions:s={},values:l,defaults:f,components:a,ns:v,i18n:d,t:g,shouldUnescape:A,...b}){const c=d||K();if(!c)return q("You will need to pass in an i18next instance by using i18nextReactModule"),e;const O=g||c.t.bind(c)||($=>$),i={...G(),...c.options?.react};let p=v||O.ns||c.options?.defaultNS;p=F(p)?[p]:p||["translation"];const u=M(e,i),x=f||u||i.transEmptyNodeValue||o,{hashTransKey:T}=i,m=o||(T?T(u||x):u||x);c.options?.interpolation?.defaultVariables&&(l=l&&Object.keys(l).length>0?{...l,...c.options.interpolation.defaultVariables}:{...c.options.interpolation.defaultVariables});const r=l||n!==void 0&&!c.options?.interpolation?.alwaysFormat||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},C={...s,context:h||s.context,count:n,...l,...r,defaultValue:x,ns:p},j=m?O(m,C):x;a&&Object.keys(a).forEach($=>{a[$].key||(a[$]=W(a[$],{key:$}));const w=a[$];if(typeof w.type=="function"||!w.props||!w.props.children||j.indexOf(`${$}/>`)<0&&j.indexOf(`${$} />`)<0)return;function V(){return N(Q,null,w)}a[$]=N(V)});const k=oe(a||e,j,c,i,C,A),y=t??i.defaultTransParent;return y?N(y,b,k):k}function pe({children:e,count:n,parent:t,i18nKey:o,context:h,tOptions:s={},values:l,defaults:f,components:a,ns:v,i18n:d,t:g,shouldUnescape:A,...b}){const{i18n:c,defaultNS:O}=Y(U)||{},i=d||c||K(),p=g||i?.t.bind(i);return le({children:e,count:n,parent:t,i18nKey:o,context:h,tOptions:s,values:l,defaults:f,components:a,ns:v||p?.ns||O||i?.options?.defaultNS,i18n:i,t:g,shouldUnescape:A,...b})}export{pe as T};
//# sourceMappingURL=Trans-Wb08S-yD.js.map
